(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"+4LL":function(t,e,n){"use strict";n.d(e,"a",(function(){return c}));class c{constructor(t,e,n,c,a){this.id=t,this.startTime=e,this.endTime=n,this.type=c,this.locations=a}}},D1vo:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var c=n("tk/3"),a=n("lJxs"),o=n("JIr8"),i=n("z6cu"),r=n("AytR"),s=n("fXoL"),l=n("b6Qw"),b=n("tyNb");const d=r.a.API_URL;let u=(()=>{class t{constructor(t,e,n){this.cookieService=t,this.http=e,this.router=n}getPageable(t){let e=new c.d({"Content-Type":"application/json",pageable:"true",page:t.toString()});return this.http.get(d+"/vehicle",{headers:e,observe:"response"}).pipe(Object(a.a)(t=>t.body),Object(o.a)(t=>Object(i.a)(t.error.message)))}getByOwner(t){let e=new c.d({"Content-Type":"application/json",pageable:"true"});return this.http.get(`${d}/owner/${t}/vehicle`,{headers:e,observe:"response"}).pipe(Object(a.a)(t=>t.body),Object(o.a)(t=>Object(i.a)(t.error.message)))}getOne(t){let e=new c.d({"Content-Type":"application/json"});return this.http.get(`${d}/vehicle/${t}`,{headers:e,observe:"response"}).pipe(Object(a.a)(t=>t.body),Object(o.a)(t=>Object(i.a)(t.error.message)))}addVehicle(t,e){let n=new c.d({}),r=new FormData;for(const c in e)r.append("images",e[c]),console.log(e[c]);return r.append("vehicle",new Blob([JSON.stringify(t)],{type:"application/json"})),this.http.post(d+"/vehicle",r,{headers:n,observe:"response"}).pipe(Object(a.a)(t=>t.body),Object(o.a)(t=>Object(i.a)(t.error.message)))}edit(t,e){let n=new c.d({"Content-Type":"application/json"});return this.http.put(`${d}/vehicle/${t}`,e,{headers:n,observe:"response"}).pipe(Object(a.a)(t=>t.body),Object(o.a)(t=>Object(i.a)(t.error.message)))}delete(t){let e=new c.d({"Content-Type":"application/json"});return this.http.delete(`${d}/vehicle/${t}`,{headers:e,observe:"response"}).pipe(Object(a.a)(t=>t.body),Object(o.a)(t=>Object(i.a)(t.error.message)))}}return t.\u0275fac=function(e){return new(e||t)(s.fc(l.a),s.fc(c.b),s.fc(b.c))},t.\u0275prov=s.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},QHs6:function(t,e,n){"use strict";n.d(e,"a",(function(){return O}));var c=n("AytR"),a=n("0IaG"),o=n("fXoL"),i=n("ofXK"),r=n("bTqV"),s=n("kmnG"),l=n("qFsG"),b=n("3Pt+"),d=n("iadO");function u(t,e){if(1&t){const t=o.Yb();o.Xb(0,"div",7),o.Xb(1,"div",8),o.Xb(2,"p",9),o.Qc(3,"From"),o.Wb(),o.Wb(),o.Xb(4,"div",10),o.Xb(5,"mat-form-field"),o.Xb(6,"input",11),o.jc("ngModelChange",(function(e){return o.Hc(t),o.nc().local_data.from=e})),o.Wb(),o.Sb(7,"mat-datepicker-toggle",12),o.Sb(8,"mat-datepicker",13,14),o.Wb(),o.Wb(),o.Sb(10,"div",15),o.Xb(11,"div",8),o.Xb(12,"p",9),o.Qc(13,"To"),o.Wb(),o.Wb(),o.Xb(14,"div",10),o.Xb(15,"mat-form-field"),o.Xb(16,"input",11),o.jc("ngModelChange",(function(e){return o.Hc(t),o.nc().local_data.to=e})),o.Wb(),o.Sb(17,"mat-datepicker-toggle",12),o.Sb(18,"mat-datepicker",13,16),o.Wb(),o.Wb(),o.Wb()}if(2&t){const t=o.Dc(9),e=o.Dc(19),n=o.nc();o.Db(6),o.uc("disabled",!0)("ngModel",n.local_data.from)("matDatepicker",t),o.Db(1),o.uc("for",t),o.Db(9),o.uc("disabled",!0)("ngModel",n.local_data.to)("matDatepicker",e),o.Db(1),o.uc("for",e)}}function p(t,e){if(1&t&&(o.Qc(0," Delete occupancy: From: "),o.Xb(1,"b"),o.Qc(2),o.Wb(),o.Qc(3," To: "),o.Xb(4,"b"),o.Qc(5),o.Wb(),o.Qc(6," Type: "),o.Xb(7,"b"),o.Qc(8),o.Wb(),o.Qc(9,"? ")),2&t){const t=o.nc();o.Db(2),o.Rc(t.local_data.from),o.Db(3),o.Rc(t.local_data.to),o.Db(3),o.Rc(t.local_data.type)}}let m=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,console.log(e),this.local_data=Object.assign({},e),this.action=this.local_data.action}doAction(){this.dialogRef.close({event:this.action,data:this.local_data})}closeDialog(){this.dialogRef.close({event:"Cancel"})}}return t.\u0275fac=function(e){return new(e||t)(o.Rb(a.f),o.Rb(a.a,8))},t.\u0275cmp=o.Lb({type:t,selectors:[["app-occupancy-dialog-box"]],decls:13,vars:4,consts:[["mat-dialog-title","",1,"col-sm-12","d-flex","justify-content-center","mt-2"],["mat-dialog-content",""],["class","row",4,"ngIf","ngIfElse"],["elseTemplate",""],["mat-dialog-actions","",1,"col-sm-12","d-flex","justify-content-center","mt-2"],["mat-button","",2,"color","white","background-color","#E81831",3,"click"],["mat-button","",3,"click"],[1,"row"],[1,"col-sm-4","d-flex","justify-content-sm-end","justify-content-center","mt-2"],[1,"feature-name"],[1,"col-sm-8","d-flex","justify-content-sm-start","justify-content-center","mt-2"],["matInput","",3,"disabled","ngModel","matDatepicker","ngModelChange"],["matSuffix","",3,"for"],["disabled","false"],["picker",""],[1,"w-100"],["picker2",""]],template:function(t,e){if(1&t&&(o.Xb(0,"h1",0),o.Xb(1,"strong"),o.Qc(2),o.Wb(),o.Qc(3," \xa0 Occupancy"),o.Wb(),o.Xb(4,"div",1),o.Oc(5,u,20,8,"div",2),o.Oc(6,p,10,3,"ng-template",null,3,o.Pc),o.Wb(),o.Xb(8,"div",4),o.Xb(9,"button",5),o.jc("click",(function(){return e.doAction()})),o.Qc(10),o.Wb(),o.Xb(11,"button",6),o.jc("click",(function(){return e.closeDialog()})),o.Qc(12,"Cancel"),o.Wb(),o.Wb()),2&t){const t=o.Dc(7);o.Db(2),o.Sc("",e.action," "),o.Db(3),o.uc("ngIf","Delete"!=e.action)("ngIfElse",t),o.Db(5),o.Rc(e.action)}},directives:[a.g,a.d,i.n,a.c,r.a,s.c,l.b,b.b,d.b,b.j,b.m,d.d,s.g,d.a],styles:[".feature-name[_ngcontent-%COMP%]{margin-left:1rem;padding-top:1rem;font-size:1.3rem;font-weight:500}"]}),t})();var g=n("+4LL"),f=n("j6lU"),h=n("NFeN"),v=n("Qu3c"),w=n("1kSV");function y(t,e){if(1&t&&(o.Xb(0,"div"),o.Xb(1,"div",19),o.Sb(2,"img",20),o.Wb(),o.Wb()),2&t){const t=o.nc();o.Db(2),o.vc("src",t.API_URL+"/vehicle/image/"+t.car.images[0],o.Jc)}}function j(t,e){1&t&&(o.Xb(0,"div"),o.Xb(1,"p",21),o.Qc(2,"No images provided"),o.Wb(),o.Wb())}function X(t,e){1&t&&(o.Xb(0,"span",22),o.Qc(1,"\u2605"),o.Wb()),2&t&&o.Ib("filled",100===e.fill)}function W(t,e){if(1&t){const t=o.Yb();o.Xb(0,"div",23),o.Xb(1,"button",24),o.Xb(2,"mat-icon"),o.Qc(3,"settings"),o.Wb(),o.Wb(),o.Xb(4,"div",25),o.Xb(5,"a",26),o.jc("click",(function(){o.Hc(t);const e=o.nc();return e.openDialog("Update",e.car)})),o.Qc(6,"Add manual occupancy"),o.Wb(),o.Wb(),o.Wb()}}let O=(()=>{class t{constructor(t,e){this.dialog=t,this.occupancyService=e,this.API_URL=c.a.API_URL}ngOnInit(){}openDialog(t,e){e.action=t,this.dialog.open(m,{width:"400px",data:e}).afterClosed().subscribe(t=>{var e;if("Update"===t.event){let n=new g.a(null,Number(t.data.from)/1e3,Number(t.data.to)/1e3,"MANUAL",null);this.occupancyService.add(null===(e=this.car)||void 0===e?void 0:e.id,n).subscribe(t=>{console.log(t)},t=>{alert(t)})}else"Delete"===t.event&&console.log(t.data)})}checkMileage(t){return-1!=t?t:"Unlimited"}}return t.\u0275fac=function(e){return new(e||t)(o.Rb(a.b),o.Rb(f.a))},t.\u0275cmp=o.Lb({type:t,selectors:[["app-car-teaser-car-info"]],inputs:{car:"car",admin:"admin"},decls:39,vars:17,consts:[[1,"row","m-3","shadow-sm","m-1","bg-white","rounded"],[1,"col-md-4","col-left","d-flex"],[4,"ngIf"],[1,"col-md-6","col-left","d-flex","justify-content-sm-start","justify-content-center","mt-3","align-items-center"],[1,"vehicle-info","mt-1"],["matTooltip","Vehicle brand and model",3,"matTooltipPosition"],["matTooltip","Fuel type",3,"matTooltipPosition"],["matTooltip","Transmission type",3,"matTooltipPosition"],["matTooltip","Vehicle category",3,"matTooltipPosition"],["matTooltip","Seats",3,"matTooltipPosition"],["matTooltip","Mileage",3,"matTooltipPosition"],[1,"col-sm-4","col-md-2","col-left"],[1,"row","mt-3","d-flex","justify-content-center","align-self-center"],["readonly","true","max","5",3,"rate","rateChange"],[1,"row","d-flex","justify-content-center","align-self-center"],[1,"col-sm-4","col-md-1","d-flex","justify-content-center","align-self-center"],["src","assets/images/comment.png","alt","",1,"comment-icon","mt-3"],[1,"col-sm-4","col-md-3","d-flex","justify-content-center","align-self-center"],["class","dropdown",4,"ngIf"],[1,"row","justify-content-center","align-self-center","ml-1"],[1,"car-Image","shadow-sm","bg-white","rounded",3,"src"],["unselectable","on","onselectstart","return false;","onmousedown","return false;",2,"text-align","center","line-height","150px","-moz-user-select","none","-webkit-user-select","none","-ms-user-select","none","user-select","none","-o-user-select","none"],[1,"star"],[1,"dropdown"],["id","dropdownMenuButton","data-toggle","dropdown","mat-button","","aria-haspopup","true","aria-expanded","false",1,"dropdown-toggle"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu"],[1,"dropdown-item",2,"cursor","pointer",3,"click"]],template:function(t,e){1&t&&(o.Xb(0,"div",0),o.Xb(1,"div",1),o.Oc(2,y,3,1,"div",2),o.Oc(3,j,3,0,"div",2),o.Wb(),o.Xb(4,"div",3),o.Xb(5,"ul",4),o.Xb(6,"li"),o.Xb(7,"mat-icon",5),o.Qc(8," directions_car"),o.Wb(),o.Qc(9),o.Wb(),o.Xb(10,"li"),o.Xb(11,"mat-icon",6),o.Qc(12," local_gas_station"),o.Wb(),o.Qc(13),o.Wb(),o.Xb(14,"li"),o.Xb(15,"mat-icon",7),o.Qc(16,"open_with"),o.Wb(),o.Qc(17),o.Wb(),o.Xb(18,"li"),o.Xb(19,"mat-icon",8),o.Qc(20,"commute"),o.Wb(),o.Qc(21),o.Wb(),o.Xb(22,"li"),o.Xb(23,"mat-icon",9),o.Qc(24,"airline_seat_recline_extra"),o.Wb(),o.Qc(25),o.Wb(),o.Xb(26,"li"),o.Xb(27,"mat-icon",10),o.Qc(28,"trending_up"),o.Wb(),o.Qc(29),o.Wb(),o.Wb(),o.Wb(),o.Xb(30,"div",11),o.Xb(31,"div",12),o.Xb(32,"ngb-rating",13),o.jc("rateChange",(function(t){return e.car.numberOfStars/(e.car.numberOfReviews=t)})),o.Oc(33,X,2,2,"ng-template"),o.Wb(),o.Wb(),o.Xb(34,"div",14),o.Xb(35,"div",15),o.Sb(36,"img",16),o.Wb(),o.Sb(37,"div",17),o.Wb(),o.Oc(38,W,7,0,"div",18),o.Wb(),o.Wb()),2&t&&(o.Db(2),o.uc("ngIf",e.car.images[0]),o.Db(1),o.uc("ngIf",!e.car.images[0]),o.Db(4),o.uc("matTooltipPosition","below"),o.Db(2),o.Tc(" ",e.car.brand.name," ",e.car.model.name," "),o.Db(2),o.uc("matTooltipPosition","below"),o.Db(2),o.Sc(" ",e.car.fuel.name," "),o.Db(2),o.uc("matTooltipPosition","below"),o.Db(2),o.Sc(" ",e.car.transmission.name," "),o.Db(2),o.uc("matTooltipPosition","below"),o.Db(2),o.Sc(" ",e.car.category.name," "),o.Db(2),o.uc("matTooltipPosition","below"),o.Db(2),o.Sc(" ",e.car.seats," "),o.Db(2),o.uc("matTooltipPosition","below"),o.Db(2),o.Sc(" ",e.checkMileage(e.car.mileage)," km "),o.Db(3),o.uc("rate",e.car.numberOfStars/e.car.numberOfReviews),o.Db(6),o.uc("ngIf",e.admin))},directives:[i.n,h.a,v.a,w.b,r.a],styles:[".star[_ngcontent-%COMP%]{font-size:1.5rem;margin-top:5em;color:#585858}.filled[_ngcontent-%COMP%]{color:#e81831}.car-Image[_ngcontent-%COMP%]{width:100%;height:100%;-o-object-fit:contain;object-fit:contain}.col-left[_ngcontent-%COMP%]{padding-left:0;align-items:center;justify-content:center}.col-vehicle-info[_ngcontent-%COMP%]{padding-left:.35em;padding-right:0}.vehicle-info[_ngcontent-%COMP%]{font-size:.8rem;list-style-type:none;-webkit-padding-start:0;padding-inline-start:0}.comment-icon[_ngcontent-%COMP%]{width:1.5em;height:1.5em}.info-label[_ngcontent-%COMP%]{font-family:RlBasisGrotesque,Avenir,Helvetica Neue,Helvetica,sans-serif;text-transform:none;margin-right:.4em;font-weight:700}.mat-icon[_ngcontent-%COMP%]{font-size:17px;width:17px;font-family:Material Icons!important;vertical-align:middle;margin-right:1rem;margin-left:.5rem;cursor:help}"]}),t})()},bLfd:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var c=n("tk/3"),a=n("lJxs"),o=n("JIr8"),i=n("z6cu"),r=n("AytR"),s=n("fXoL"),l=n("b6Qw"),b=n("tyNb");const d=r.a.API_URL;let u=(()=>{class t{constructor(t,e,n){this.cookieService=t,this.http=e,this.router=n}checkout(t){let e=new c.d({"Content-Type":"application/json"});return this.http.post(d+"/checkout",t,{headers:e,observe:"response",responseType:"text"}).pipe(Object(a.a)(t=>t.body),Object(o.a)(t=>Object(i.a)(t.error.message)))}getCustomerRentals(t,e,n){const r=new c.d({"Content-Type":"application/json",pageable:"true",page:n.toString()});return this.http.get(`${d}/customer/${t}/rental/status/${e}`,{headers:r,observe:"response"}).pipe(Object(a.a)(t=>t.body),Object(o.a)(t=>Object(i.a)(t.error.message)))}getOwnerRentals(t,e,n){const r=new c.d({"Content-Type":"application/json",pageable:"true",page:n.toString()});return this.http.get(`${d}/owner/${t}/rental/status/${e}`,{headers:r,observe:"response"}).pipe(Object(a.a)(t=>t.body),Object(o.a)(t=>Object(i.a)(t.error.message)))}edit(t,e){let n=new c.d({"Content-Type":"application/json"});return this.http.put(`${d}/rental/${t}`,e,{headers:n,observe:"response"}).pipe(Object(a.a)(t=>t.body),Object(o.a)(t=>Object(i.a)(t.error)))}}return t.\u0275fac=function(e){return new(e||t)(s.fc(l.a),s.fc(c.b),s.fc(b.c))},t.\u0275prov=s.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},j6lU:function(t,e,n){"use strict";n.d(e,"a",(function(){return u}));var c=n("AytR"),a=n("tk/3"),o=n("lJxs"),i=n("JIr8"),r=n("z6cu"),s=n("fXoL"),l=n("b6Qw"),b=n("tyNb");const d=c.a.API_URL;let u=(()=>{class t{constructor(t,e,n){this.cookieService=t,this.http=e,this.router=n}getByVehicle(t){let e=new a.d({"Content-Type":"application/json"});return this.http.get(`${d}/vehicle/${t}/occupancy`,{headers:e,observe:"response"}).pipe(Object(o.a)(t=>t.body),Object(i.a)(t=>Object(r.a)(t.error.message)))}getOne(t,e,n){let c=new a.d({"Content-Type":"application/json"});return this.http.get(`${d}/vehicle/${t}/occupancy/start/${e}/end/${n}`,{headers:c,observe:"response"}).pipe(Object(o.a)(t=>t.body),Object(i.a)(t=>Object(r.a)(t.error.message)))}add(t,e){let n=new a.d({"Content-Type":"application/json"});return this.http.post(`${d}/vehicle/${t}/occupancy`,e,{headers:n,observe:"response"}).pipe(Object(o.a)(t=>t.body),Object(i.a)(t=>Object(r.a)(t.error.message)))}edit(t,e,n){let c=new a.d({"Content-Type":"application/json"});return this.http.put(`${d}/vehicle/${t}/occupancy/${e}`,n,{headers:c,observe:"response"}).pipe(Object(o.a)(t=>t.body),Object(i.a)(t=>Object(r.a)(t.error.message)))}delete(t,e){let n=new a.d({"Content-Type":"application/json"});return this.http.delete(`${d}/vehicle/${t}/occupancy/${e}`,{headers:n,observe:"response"}).pipe(Object(o.a)(t=>t.body),Object(i.a)(t=>Object(r.a)(t.error.message)))}}return t.\u0275fac=function(e){return new(e||t)(s.fc(l.a),s.fc(a.b),s.fc(b.c))},t.\u0275prov=s.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})()},wF8t:function(t,e,n){"use strict";n.d(e,"a",(function(){return N}));var c=n("fXoL"),a=n("zoVj");class o{}var i=n("0IaG"),r=n("kmnG"),s=n("qFsG"),l=n("3Pt+"),b=n("1kSV"),d=n("bTqV");function u(t,e){1&t&&(c.Xb(0,"span",13),c.Qc(1,"\u2605"),c.Wb()),2&t&&c.Ib("filled",100===e.fill)}let p=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,this.local_data=Object.assign({},e)}doAction(){this.dialogRef.close({data:this.local_data})}closeDialog(){this.dialogRef.close({event:"Cancel"})}}return t.\u0275fac=function(e){return new(e||t)(c.Rb(i.f),c.Rb(i.a,8))},t.\u0275cmp=c.Lb({type:t,selectors:[["app-new-review-dialogbox"]],decls:23,vars:2,consts:[[1,"text-center"],["mat-dialog-title",""],["mat-dialog-content","",1,"row-sm-12"],[1,"row-sm-12"],[2,"width","80%"],["rows","4","placeholder","Review text","matInput","",3,"ngModel","ngModelChange"],[1,"row","mt-3","d-flex","justify-content-center","align-self-center"],[1,"row","mt-3","mb-3","d-flex","justify-content-center","align-self-center"],["max","5",3,"rate","rateChange"],[1,"text-right"],["mat-dialog-actions","",1,"col-sm-12","d-flex","justify-content-center","mt-2"],["mat-button","",1,"do-button",3,"click"],["mat-button","","mat-flat-button","",3,"click"],[1,"star"]],template:function(t,e){1&t&&(c.Xb(0,"div",0),c.Xb(1,"h1",1),c.Xb(2,"strong"),c.Qc(3,"New review"),c.Wb(),c.Wb(),c.Xb(4,"div",2),c.Xb(5,"div"),c.Xb(6,"div",3),c.Xb(7,"mat-form-field",4),c.Xb(8,"textarea",5),c.jc("ngModelChange",(function(t){return e.local_data.text=t})),c.Qc(9," "),c.Wb(),c.Wb(),c.Wb(),c.Xb(10,"div",3),c.Xb(11,"div",6),c.Xb(12,"p"),c.Qc(13,"Rating"),c.Wb(),c.Wb(),c.Xb(14,"div",7),c.Xb(15,"ngb-rating",8),c.jc("rateChange",(function(t){return e.local_data.stars=t})),c.Oc(16,u,2,2,"ng-template"),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Wb(),c.Xb(17,"div",9),c.Xb(18,"div",10),c.Xb(19,"button",11),c.jc("click",(function(){return e.doAction()})),c.Qc(20,"Post a review"),c.Wb(),c.Xb(21,"button",12),c.jc("click",(function(){return e.closeDialog()})),c.Qc(22,"Cancel"),c.Wb(),c.Wb(),c.Wb(),c.Wb()),2&t&&(c.Db(8),c.uc("ngModel",e.local_data.text),c.Db(7),c.uc("rate",e.local_data.stars))},directives:[i.g,i.d,r.c,s.b,l.b,l.j,l.m,b.b,i.c,d.a],styles:[".do-button[_ngcontent-%COMP%]{background-color:#e81831;color:#fff}.star[_ngcontent-%COMP%]{font-size:3rem;margin-top:5em;color:#585858}.filled[_ngcontent-%COMP%]{color:#e81831}ng-template[_ngcontent-%COMP%], ngb-rating[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{outline:none}"]}),t})();class m{}var g=n("ofXK");function f(t,e){if(1&t&&(c.Xb(0,"div",7),c.Xb(1,"div",8),c.Xb(2,"p",9),c.Qc(3,"Penalty: "),c.Wb(),c.Wb(),c.Xb(4,"div",10),c.Xb(5,"p",11),c.Qc(6),c.Wb(),c.Wb(),c.Wb()),2&t){const t=c.nc();c.Db(6),c.Rc(t.getPenalty())}}let h=(()=>{class t{constructor(t,e){this.dialogRef=t,this.data=e,this.penalty=!1,this.mileage=0,this.local_data=Object.assign({},e),this.report=this.local_data.report,this.rental=this.local_data.rental}calculatePenalty(t){this.mileage=t.target.value,this.mileage>this.rental.car.availableMileage&&-1!=this.rental.car.availableMileage&&0!=this.rental.car.pricelist.penalty?(this.penalty=!0,this.penaltyValue=(this.mileage-this.rental.car.availableMileage)*this.rental.car.pricelist.penalty):(this.penalty=!1,this.penaltyValue=null)}getPenalty(){return this.penaltyValue}finalPrice(){let t=Math.ceil((this.rental.to-this.rental.from)/86400),e=t*this.rental.car.pricelist.pricePerDay;return t>10&&(e-=e*this.rental.car.pricelist.discount),e}doAction(){this.dialogRef.close({data:this.local_data})}closeDialog(){this.dialogRef.close({event:"Cancel"})}}return t.\u0275fac=function(e){return new(e||t)(c.Rb(i.f),c.Rb(i.a,8))},t.\u0275cmp=c.Lb({type:t,selectors:[["app-new-rental-report-dialogbox"]],decls:27,vars:4,consts:[[1,"text-center"],["mat-dialog-title",""],["mat-dialog-content","",1,"row-sm-12"],[1,"row-sm-12"],[2,"width","80%"],["rows","4","placeholder","Description","matInput","",3,"ngModel","ngModelChange"],["type","number","name","mileage","placeholder","Mileage","matInput","",3,"ngModel","change","ngModelChange"],[1,"row"],[1,"col-sm-6","d-flex","justify-content-center"],[1,"label"],[1,"col-sm-4","d-flex","justify-content-center"],[1,"number"],["class","row",4,"ngIf"],[1,"text-right"],["mat-dialog-actions","",1,"col-sm-12","d-flex","justify-content-center","mt-2"],["mat-button","",1,"do-button",3,"click"],["mat-button","","mat-flat-button","",3,"click"]],template:function(t,e){1&t&&(c.Xb(0,"div",0),c.Xb(1,"h1",1),c.Xb(2,"strong"),c.Qc(3,"New rental report"),c.Wb(),c.Wb(),c.Xb(4,"div",2),c.Xb(5,"div"),c.Xb(6,"div",3),c.Xb(7,"mat-form-field",4),c.Xb(8,"textarea",5),c.jc("ngModelChange",(function(t){return e.local_data.description=t})),c.Qc(9," "),c.Wb(),c.Wb(),c.Wb(),c.Xb(10,"div",3),c.Xb(11,"mat-form-field",4),c.Xb(12,"input",6),c.jc("change",(function(t){return e.calculatePenalty(t)}))("ngModelChange",(function(t){return e.local_data.mileage=t})),c.Wb(),c.Wb(),c.Wb(),c.Xb(13,"div",7),c.Xb(14,"div",8),c.Xb(15,"p",9),c.Qc(16,"Final price: "),c.Wb(),c.Wb(),c.Xb(17,"div",10),c.Xb(18,"p",11),c.Qc(19),c.Wb(),c.Wb(),c.Wb(),c.Oc(20,f,7,1,"div",12),c.Wb(),c.Wb(),c.Xb(21,"div",13),c.Xb(22,"div",14),c.Xb(23,"button",15),c.jc("click",(function(){return e.doAction()})),c.Qc(24,"Submit a report"),c.Wb(),c.Xb(25,"button",16),c.jc("click",(function(){return e.closeDialog()})),c.Qc(26,"Cancel"),c.Wb(),c.Wb(),c.Wb(),c.Wb()),2&t&&(c.Db(8),c.uc("ngModel",e.local_data.description),c.Db(4),c.uc("ngModel",e.local_data.mileage),c.Db(7),c.Rc(e.finalPrice()),c.Db(1),c.uc("ngIf",e.penalty))},directives:[i.g,i.d,r.c,s.b,l.b,l.j,l.m,l.o,g.n,i.c,d.a],styles:[".do-button[_ngcontent-%COMP%]{background-color:#e81831;color:#fff}"]}),t})();class v{}var w=n("qfBg"),y=n("AytR"),j=n("tk/3"),X=n("lJxs"),W=n("JIr8"),O=n("z6cu");const D=y.a.API_URL;let I=(()=>{class t{constructor(t){this.http=t}add(t){let e=new j.d({"Content-Type":"application/json"});return this.http.post(`${D}/rental/${t.rentalId}/rental_report`,t,{headers:e,observe:"response"}).pipe(Object(X.a)(t=>t.body),Object(W.a)(t=>Object(O.a)(t.error.message)))}}return t.\u0275fac=function(e){return new(e||t)(c.fc(j.b))},t.\u0275prov=c.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();var k=n("4kQV"),C=n("bLfd"),P=n("QHs6");function R(t,e){if(1&t){const t=c.Yb();c.Xb(0,"a",14),c.jc("click",(function(e){return c.Hc(t),c.nc(2).newReview(e)})),c.Qc(1,"Post a review"),c.Wb()}}function _(t,e){if(1&t){const t=c.Yb();c.Xb(0,"a",14),c.jc("click",(function(e){return c.Hc(t),c.nc(2).sendMessage(e)})),c.Qc(1,"Send a message to customer"),c.Wb()}}function x(t,e){if(1&t&&(c.Xb(0,"div",12),c.Oc(1,R,2,0,"a",13),c.Oc(2,_,2,0,"a",13),c.Wb()),2&t){const t=c.nc();c.Db(1),c.uc("ngIf","FINISHED"===t.status),c.Db(1),c.uc("ngIf","PENDING"===t.status)}}function Q(t,e){if(1&t){const t=c.Yb();c.Xb(0,"a",14),c.jc("click",(function(e){return c.Hc(t),c.nc(2).approveRental(e)})),c.Qc(1,"Approve"),c.Wb()}}function M(t,e){if(1&t){const t=c.Yb();c.Xb(0,"a",17),c.jc("click",(function(e){return c.Hc(t),c.nc(2).rejectRental(e)})),c.Qc(1,"Reject"),c.Wb()}}function S(t,e){if(1&t){const t=c.Yb();c.Xb(0,"a",14),c.jc("click",(function(e){return c.Hc(t),c.nc(2).sendMessage(e)})),c.Qc(1,"Send a message to owner"),c.Wb()}}function T(t,e){if(1&t){const t=c.Yb();c.Xb(0,"a",18),c.jc("click",(function(e){return c.Hc(t),c.nc(2).finishRental(e)})),c.Qc(1,"\xa0Confirm rental finishing \xa0"),c.Wb()}}function L(t,e){if(1&t){const t=c.Yb();c.Xb(0,"a",14),c.jc("click",(function(e){return c.Hc(t),c.nc(2).newReport(e)})),c.Qc(1,"Rental report"),c.Wb()}}function $(t,e){if(1&t&&(c.Xb(0,"div",12),c.Oc(1,Q,2,0,"a",13),c.Oc(2,M,2,0,"a",15),c.Oc(3,S,2,0,"a",13),c.Oc(4,T,2,0,"a",16),c.Oc(5,L,2,0,"a",13),c.Wb()),2&t){const t=c.nc();c.Db(1),c.uc("ngIf","PENDING"===t.status),c.Db(1),c.uc("ngIf","PENDING"===t.status),c.Db(1),c.uc("ngIf","PENDING"===t.status),c.Db(1),c.uc("ngIf","RESERVED"===t.status),c.Db(1),c.uc("ngIf","FINISHED"===t.status&&null===t.rental.report)}}let N=(()=>{class t{constructor(t,e,n,a,o){this.userService=t,this.rentalReportService=e,this.reviewService=n,this.rentalService=a,this.dialog=o,this.delete=new c.o}ngOnInit(){}fromLocaleString(){return new Date(1e3*this.rental.from).toLocaleString()}toLocaleString(){return new Date(1e3*this.rental.to).toLocaleString()}sendMessage(t){t.stopPropagation()}newReview(t){t.stopPropagation(),this.dialog.open(p,{width:"500px",data:new o}).afterClosed().subscribe(t=>{if("Cancel"===t.event)return;const e=new o;e.text=t.data.text,e.stars=t.data.stars;const n=new m;n.id=this.rental.car.id,e.vehicle=n,e.customerId=this.userService.getUser().id,e.customerName=this.userService.getUser().name,e.date=Date.now()/1e3,console.log(e),this.reviewService.add(e.vehicle.id,e).subscribe(t=>{},t=>{alert(t)})})}approveRental(t){t.stopPropagation();const e=new a.a(this.rental.id,this.rental.car.id,this.rental.customerId,this.rental.ownerId,this.rental.from,this.rental.to,null,null,"RESERVED",this.rental.company);this.rentalService.edit(this.rental.id,e).subscribe(t=>{this.delete.emit(this.rental)},t=>{alert(t.message),"CONFLICT"===t.status&&this.delete.emit(this.rental)})}rejectRental(t){t.stopPropagation();const e=new a.a(this.rental.id,this.rental.car.id,this.rental.customerId,this.rental.ownerId,this.rental.from,this.rental.to,null,null,"CANCELED",this.rental.company);this.rentalService.edit(this.rental.id,e).subscribe(t=>{this.delete.emit(this.rental)},t=>{alert(t.message)})}finishRental(t){t.stopPropagation();const e=new a.a(this.rental.id,this.rental.car.id,this.rental.customerId,this.rental.ownerId,this.rental.from,this.rental.to,null,null,"FINISHED",this.rental.company);this.rentalService.edit(this.rental.id,e).subscribe(t=>{this.delete.emit(this.rental)},t=>{alert(t.message)})}newReport(t){t.stopPropagation(),this.dialog.open(h,{width:"500px",data:{report:new v,rental:this.rental}}).afterClosed().subscribe(t=>{if("Cancel"===t.event)return;const e=new v;e.description=t.data.description,e.mileage=t.data.mileage,e.rentalId=this.rental.id,this.rentalReportService.add(e).subscribe(t=>{this.rental.report=new v},t=>{alert(t)})})}}return t.\u0275fac=function(e){return new(e||t)(c.Rb(w.a),c.Rb(I),c.Rb(k.a),c.Rb(C.a),c.Rb(i.b))},t.\u0275cmp=c.Lb({type:t,selectors:[["app-rental-teaser"]],inputs:{rental:"rental",status:"status",customer:"customer"},outputs:{delete:"delete"},decls:24,vars:5,consts:[[1,"row",2,"width","100%"],[2,"width","100%",3,"car"],[1,"row","mb-1","ml-2","shadow-sm","bg-white","rounded",2,"width","94%"],[1,"col-sm-7","mt-3"],[1,"row","ml-1"],[1,"col-sm-2","d-flex","justify-content-sm-end","justify-content-center"],[1,"label"],[1,"col-sm-8","d-flex","justify-content-sm-start","justify-content-center"],[1,"text"],[1,"w-100"],[1,"col-sm-5","d-flex","justify-content-sm-end","justify-content-center"],["class","row mt-3 ml-3 mb-3","style","margin-bottom: 0; margin-right: 0;",4,"ngIf"],[1,"row","mt-3","ml-3","mb-3",2,"margin-bottom","0","margin-right","0"],["class","btn btn-sm btn-outline-danger",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],["class","btn btn-sm btn-outline-danger","style","margin-left: 3px;",3,"click",4,"ngIf"],["class","btn btn-sm btn-outline-danger","style","margin-top: 3px;",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-outline-danger",2,"margin-left","3px",3,"click"],[1,"btn","btn-sm","btn-outline-danger",2,"margin-top","3px",3,"click"]],template:function(t,e){1&t&&(c.Xb(0,"div",0),c.Xb(1,"app-car-teaser-car-info",1),c.Qc(2," [admin]='false'"),c.Wb(),c.Wb(),c.Xb(3,"div",2),c.Xb(4,"div",3),c.Xb(5,"div",4),c.Xb(6,"div",5),c.Xb(7,"p",6),c.Qc(8,"From"),c.Wb(),c.Wb(),c.Xb(9,"div",7),c.Xb(10,"p",8),c.Qc(11),c.Wb(),c.Wb(),c.Sb(12,"div",9),c.Wb(),c.Xb(13,"div",4),c.Xb(14,"div",5),c.Xb(15,"p",6),c.Qc(16,"To"),c.Wb(),c.Wb(),c.Xb(17,"div",7),c.Xb(18,"p",8),c.Qc(19),c.Wb(),c.Wb(),c.Sb(20,"div",9),c.Wb(),c.Wb(),c.Xb(21,"div",10),c.Oc(22,x,3,2,"div",11),c.Oc(23,$,6,5,"div",11),c.Wb(),c.Wb()),2&t&&(c.Db(1),c.uc("car",e.rental.car),c.Db(10),c.Rc(e.fromLocaleString()),c.Db(8),c.Rc(e.toLocaleString()),c.Db(3),c.uc("ngIf",e.customer),c.Db(1),c.uc("ngIf",!e.customer))},directives:[P.a,g.n],styles:[".label[_ngcontent-%COMP%]{font-weight:500}.text[_ngcontent-%COMP%]{font-weight:400}.mat-checkbox-indeterminate.mat-accent[_ngcontent-%COMP%]   .mat-checkbox-background[_ngcontent-%COMP%],   .mat-checkbox-checked.mat-accent .mat-checkbox-background{background-color:#e81831}.mat-icon[_ngcontent-%COMP%]{font-size:17px;width:17px;font-family:Material Icons!important;vertical-align:middle;margin-right:1rem;margin-left:.5rem;cursor:help}.dropdown-toggle[_ngcontent-%COMP%]:after{display:none}.active[_ngcontent-%COMP%]{background-color:#e81831;color:#eee}.btn-outline-danger[_ngcontent-%COMP%]{display:inline-flex;align-items:center}.btn-outline-danger[_ngcontent-%COMP%]:hover{background-color:#e81831}a[_ngcontent-%COMP%]:hover{color:#fff}"]}),t})()},zoVj:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return a}));class c{constructor(t,e,n,c,a,o,i,r,s){this.id=t,this.car=e,this.from=n,this.to=c,this.bundle=a,this.report=o,this.customerId=i,this.ownerId=r,this.company=s}}class a{constructor(t,e,n,c,a,o,i,r,s,l){this.bundle=null,this.id=t,this.vehicleId=e,this.customerId=n,this.ownerId=c,this.startTime=a,this.endTime=o,this.bundle=i,this.report=r,this.status=s,this.cid=l}}}}]);