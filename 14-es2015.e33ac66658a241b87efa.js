(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{d7gL:function(t,e,n){"use strict";n.r(e),n.d(e,"CustomerModule",(function(){return M}));var s=n("ofXK"),c=n("3Pt+"),o=n("wZkO"),i=n("+0xr"),r=n("0IaG"),a=n("kmnG"),b=n("qFsG"),l=n("bTqV"),u=n("d3UM"),d=n("NFeN"),g=n("tyNb"),m=n("fXoL"),p=n("zoVj"),v=n("qfBg"),f=n("bLfd"),h=n("D1vo"),w=n("wF8t");function O(t,e){if(1&t){const t=m.Yb();m.Xb(0,"div",6),m.jc("click",(function(){m.Hc(t);const n=e.$implicit;return m.nc().showVehicle(n.car.id)})),m.Sb(1,"app-rental-teaser",7),m.Wb()}if(2&t){const t=e.$implicit,n=m.nc();m.Db(1),m.uc("rental",t)("status",n.status)("customer",!0)}}function X(t,e){1&t&&m.Sb(0,"hr",8)}function W(t,e){if(1&t){const t=m.Yb();m.Xb(0,"div",9),m.Xb(1,"a",10),m.jc("click",(function(){m.Hc(t);const e=m.nc();return e.getCustomerRentals(e.pageNo+1)})),m.Qc(2,"Load more"),m.Wb(),m.Wb()}}let C=(()=>{class t{constructor(t,e,n){this.userService=t,this.rentalService=e,this.vehicleService=n,this.rentals=new Array}ngOnInit(){}ngOnChanges(t){this.rentals=new Array,this.getCustomerRentals(0)}getCustomerRentals(t){var e;const n=null===(e=this.userService.getUser())||void 0===e?void 0:e.id;this.rentalService.getCustomerRentals(n,this.status,t).subscribe(t=>{t.content.forEach(t=>{this.getVehicle(t.vehicleId).then(e=>{const n=new p.b(t.id,e,t.startTime,t.endTime,t.bundle,null,t.customerId,t.ownerId,t.company);this.rentals.push(n)})}),this.pageNo=t.pageNo,this.totalPages=t.totalPages},t=>{alert(t)})}getVehicle(t){return new Promise((e,n)=>{this.vehicleService.getOne(t).subscribe(t=>{e(t)},t=>{console.log(t),n()})})}showVehicle(t){window.open("/vehicle?vehicleID="+t,"_blank")}}return t.\u0275fac=function(e){return new(e||t)(m.Rb(v.a),m.Rb(f.a),m.Rb(h.a))},t.\u0275cmp=m.Lb({type:t,selectors:[["app-customer-rentals-listing"]],inputs:{status:"status"},features:[m.Bb],decls:6,vars:3,consts:[[1,"container","mt-3"],[1,"row",2,"justify-content","center"],[1,"col-9"],["class","teaser","style","padding: 0.01em;",3,"click",4,"ngFor","ngForOf"],["class","dashed",4,"ngIf"],["class","row m-3 m-1 more-button-div",4,"ngIf"],[1,"teaser",2,"padding","0.01em",3,"click"],[3,"rental","status","customer"],[1,"dashed"],[1,"row","m-3","m-1","more-button-div"],[1,"btn","btn-sm","btn-outline-danger","more-button-button",3,"click"]],template:function(t,e){1&t&&(m.Xb(0,"div",0),m.Xb(1,"div",1),m.Xb(2,"div",2),m.Oc(3,O,2,3,"div",3),m.Oc(4,X,1,0,"hr",4),m.Oc(5,W,3,0,"div",5),m.Wb(),m.Wb(),m.Wb()),2&t&&(m.Db(3),m.uc("ngForOf",e.rentals),m.Db(1),m.uc("ngIf",e.totalPages>e.pageNo+1),m.Db(1),m.uc("ngIf",e.totalPages>e.pageNo+1))},directives:[s.m,s.n,w.a],styles:[".more-button-div[_ngcontent-%COMP%]{align-items:center;justify-content:center}.more-button-button[_ngcontent-%COMP%]:hover{color:#fff}.btn-outline-danger[_ngcontent-%COMP%]{margin-top:.25em;line-height:6vh;outline-color:#e81831}.btn-outline-danger[_ngcontent-%COMP%]:hover{background-color:#e81831}.teaser[_ngcontent-%COMP%]:hover{cursor:pointer}"]}),t})();function P(t,e){1&t&&(m.Xb(0,"div",5),m.Xb(1,"div",6),m.Xb(2,"div",7),m.Sb(3,"app-customer-rentals-listing",8),m.Wb(),m.Wb(),m.Wb()),2&t&&(m.Db(3),m.uc("status","PENDING"))}function y(t,e){1&t&&(m.Xb(0,"div",5),m.Xb(1,"div",6),m.Xb(2,"div",7),m.Sb(3,"app-customer-rentals-listing",8),m.Wb(),m.Wb(),m.Wb()),2&t&&(m.Db(3),m.uc("status","RESERVED"))}function D(t,e){1&t&&(m.Xb(0,"div",5),m.Xb(1,"div",6),m.Xb(2,"div",7),m.Sb(3,"app-customer-rentals-listing",8),m.Wb(),m.Wb(),m.Wb()),2&t&&(m.Db(3),m.uc("status","FINISHED"))}function I(t,e){1&t&&(m.Xb(0,"div",5),m.Xb(1,"div",6),m.Xb(2,"div",7),m.Sb(3,"app-customer-rentals-listing",8),m.Wb(),m.Wb(),m.Wb()),2&t&&(m.Db(3),m.uc("status","CANCELED"))}const S=[{path:"",component:(()=>{class t{constructor(){}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=m.Lb({type:t,selectors:[["app-customer-rentals"]],decls:9,vars:0,consts:[["label","Pending"],["matTabContent",""],["label","Reserved"],["label","Finished"],["label","Canceled"],[1,"container"],[1,"row"],[1,"col-12"],[3,"status"]],template:function(t,e){1&t&&(m.Xb(0,"mat-tab-group"),m.Xb(1,"mat-tab",0),m.Oc(2,P,4,1,"ng-template",1),m.Wb(),m.Xb(3,"mat-tab",2),m.Oc(4,y,4,1,"ng-template",1),m.Wb(),m.Xb(5,"mat-tab",3),m.Oc(6,D,4,1,"ng-template",1),m.Wb(),m.Xb(7,"mat-tab",4),m.Oc(8,I,4,1,"ng-template",1),m.Wb(),m.Wb())},directives:[o.c,o.a,o.b,C],styles:[".mat-tab-label[_ngcontent-%COMP%], .mat-tab-labels[_ngcontent-%COMP%], .mat-tab-link[_ngcontent-%COMP%]{font-size:1.4em;color:#585858}.container[_ngcontent-%COMP%]{padding-top:1em}"]}),t})(),canActivate:[],children:[]},{path:"**",redirectTo:""}];let k=(()=>{class t{}return t.\u0275mod=m.Pb({type:t}),t.\u0275inj=m.Ob({factory:function(e){return new(e||t)},imports:[[g.g.forChild(S)],g.g]}),t})();var N=n("PCNd");let M=(()=>{class t{}return t.\u0275mod=m.Pb({type:t}),t.\u0275inj=m.Ob({factory:function(e){return new(e||t)},imports:[[s.c,c.f,o.d,c.f,i.k,r.e,a.e,b.c,l.b,b.c,u.b,d.b,N.a,k]]}),t})()}}]);