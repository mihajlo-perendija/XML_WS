function _defineProperties(t,e){for(var n=0;n<e.length;n++){var a=e[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(t,a.key,a)}}function _createClass(t,e,n){return e&&_defineProperties(t.prototype,e),n&&_defineProperties(t,n),t}function _classCallCheck(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{"+4LL":function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var a=function t(e,n,a,c,o){_classCallCheck(this,t),this.id=e,this.startTime=n,this.endTime=a,this.type=c,this.locations=o}},D1vo:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var a=n("tk/3"),c=n("lJxs"),o=n("JIr8"),i=n("z6cu"),r=n("AytR"),l=n("fXoL"),s=n("b6Qw"),u=n("tyNb"),b=r.a.API_URL,d=function(){var t=function(){function t(e,n,a){_classCallCheck(this,t),this.cookieService=e,this.http=n,this.router=a}return _createClass(t,[{key:"getPageable",value:function(t){var e=new a.d({"Content-Type":"application/json",pageable:"true",page:t.toString()});return this.http.get(b+"/vehicle",{headers:e,observe:"response"}).pipe(Object(c.a)((function(t){return t.body})),Object(o.a)((function(t){return Object(i.a)(t.error.message)})))}},{key:"getByOwner",value:function(t){var e=new a.d({"Content-Type":"application/json",pageable:"true"});return this.http.get("".concat(b,"/owner/").concat(t,"/vehicle"),{headers:e,observe:"response"}).pipe(Object(c.a)((function(t){return t.body})),Object(o.a)((function(t){return Object(i.a)(t.error.message)})))}},{key:"getOne",value:function(t){var e=new a.d({"Content-Type":"application/json"});return this.http.get("".concat(b,"/vehicle/").concat(t),{headers:e,observe:"response"}).pipe(Object(c.a)((function(t){return t.body})),Object(o.a)((function(t){return Object(i.a)(t.error.message)})))}},{key:"addVehicle",value:function(t,e){var n=new a.d({}),r=new FormData;for(var l in e)r.append("images",e[l]),console.log(e[l]);return r.append("vehicle",new Blob([JSON.stringify(t)],{type:"application/json"})),this.http.post(b+"/vehicle",r,{headers:n,observe:"response"}).pipe(Object(c.a)((function(t){return t.body})),Object(o.a)((function(t){return Object(i.a)(t.error.message)})))}},{key:"edit",value:function(t,e){var n=new a.d({"Content-Type":"application/json"});return this.http.put("".concat(b,"/vehicle/").concat(t),e,{headers:n,observe:"response"}).pipe(Object(c.a)((function(t){return t.body})),Object(o.a)((function(t){return Object(i.a)(t.error.message)})))}},{key:"delete",value:function(t){var e=new a.d({"Content-Type":"application/json"});return this.http.delete("".concat(b,"/vehicle/").concat(t),{headers:e,observe:"response"}).pipe(Object(c.a)((function(t){return t.body})),Object(o.a)((function(t){return Object(i.a)(t.error.message)})))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l.fc(s.a),l.fc(a.b),l.fc(u.c))},t.\u0275prov=l.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},QHs6:function(t,e,n){"use strict";n.d(e,"a",(function(){return O}));var a=n("AytR"),c=n("0IaG"),o=n("fXoL"),i=n("ofXK"),r=n("bTqV"),l=n("kmnG"),s=n("qFsG"),u=n("3Pt+"),b=n("iadO");function d(t,e){if(1&t){var n=o.Yb();o.Xb(0,"div",7),o.Xb(1,"div",8),o.Xb(2,"p",9),o.Qc(3,"From"),o.Wb(),o.Wb(),o.Xb(4,"div",10),o.Xb(5,"mat-form-field"),o.Xb(6,"input",11),o.jc("ngModelChange",(function(t){return o.Hc(n),o.nc().local_data.from=t})),o.Wb(),o.Sb(7,"mat-datepicker-toggle",12),o.Sb(8,"mat-datepicker",13,14),o.Wb(),o.Wb(),o.Sb(10,"div",15),o.Xb(11,"div",8),o.Xb(12,"p",9),o.Qc(13,"To"),o.Wb(),o.Wb(),o.Xb(14,"div",10),o.Xb(15,"mat-form-field"),o.Xb(16,"input",11),o.jc("ngModelChange",(function(t){return o.Hc(n),o.nc().local_data.to=t})),o.Wb(),o.Sb(17,"mat-datepicker-toggle",12),o.Sb(18,"mat-datepicker",13,16),o.Wb(),o.Wb(),o.Wb()}if(2&t){var a=o.Dc(9),c=o.Dc(19),i=o.nc();o.Db(6),o.uc("disabled",!0)("ngModel",i.local_data.from)("matDatepicker",a),o.Db(1),o.uc("for",a),o.Db(9),o.uc("disabled",!0)("ngModel",i.local_data.to)("matDatepicker",c),o.Db(1),o.uc("for",c)}}function f(t,e){if(1&t&&(o.Qc(0," Delete occupancy: From: "),o.Xb(1,"b"),o.Qc(2),o.Wb(),o.Qc(3," To: "),o.Xb(4,"b"),o.Qc(5),o.Wb(),o.Qc(6," Type: "),o.Xb(7,"b"),o.Qc(8),o.Wb(),o.Qc(9,"? ")),2&t){var n=o.nc();o.Db(2),o.Rc(n.local_data.from),o.Db(3),o.Rc(n.local_data.to),o.Db(3),o.Rc(n.local_data.type)}}var p,m=((p=function(){function t(e,n){_classCallCheck(this,t),this.dialogRef=e,this.data=n,console.log(n),this.local_data=Object.assign({},n),this.action=this.local_data.action}return _createClass(t,[{key:"doAction",value:function(){this.dialogRef.close({event:this.action,data:this.local_data})}},{key:"closeDialog",value:function(){this.dialogRef.close({event:"Cancel"})}}]),t}()).\u0275fac=function(t){return new(t||p)(o.Rb(c.f),o.Rb(c.a,8))},p.\u0275cmp=o.Lb({type:p,selectors:[["app-occupancy-dialog-box"]],decls:13,vars:4,consts:[["mat-dialog-title","",1,"col-sm-12","d-flex","justify-content-center","mt-2"],["mat-dialog-content",""],["class","row",4,"ngIf","ngIfElse"],["elseTemplate",""],["mat-dialog-actions","",1,"col-sm-12","d-flex","justify-content-center","mt-2"],["mat-button","",2,"color","white","background-color","#E81831",3,"click"],["mat-button","",3,"click"],[1,"row"],[1,"col-sm-4","d-flex","justify-content-sm-end","justify-content-center","mt-2"],[1,"feature-name"],[1,"col-sm-8","d-flex","justify-content-sm-start","justify-content-center","mt-2"],["matInput","",3,"disabled","ngModel","matDatepicker","ngModelChange"],["matSuffix","",3,"for"],["disabled","false"],["picker",""],[1,"w-100"],["picker2",""]],template:function(t,e){if(1&t&&(o.Xb(0,"h1",0),o.Xb(1,"strong"),o.Qc(2),o.Wb(),o.Qc(3," \xa0 Occupancy"),o.Wb(),o.Xb(4,"div",1),o.Oc(5,d,20,8,"div",2),o.Oc(6,f,10,3,"ng-template",null,3,o.Pc),o.Wb(),o.Xb(8,"div",4),o.Xb(9,"button",5),o.jc("click",(function(){return e.doAction()})),o.Qc(10),o.Wb(),o.Xb(11,"button",6),o.jc("click",(function(){return e.closeDialog()})),o.Qc(12,"Cancel"),o.Wb(),o.Wb()),2&t){var n=o.Dc(7);o.Db(2),o.Sc("",e.action," "),o.Db(3),o.uc("ngIf","Delete"!=e.action)("ngIfElse",n),o.Db(5),o.Rc(e.action)}},directives:[c.g,c.d,i.n,c.c,r.a,l.c,s.b,u.b,b.b,u.j,u.m,b.d,l.g,b.a],styles:[".feature-name[_ngcontent-%COMP%]{margin-left:1rem;padding-top:1rem;font-size:1.3rem;font-weight:500}"]}),p),g=n("+4LL"),h=n("j6lU"),v=n("NFeN"),y=n("Qu3c"),w=n("1kSV");function k(t,e){if(1&t&&(o.Xb(0,"div"),o.Xb(1,"div",19),o.Sb(2,"img",20),o.Wb(),o.Wb()),2&t){var n=o.nc();o.Db(2),o.vc("src",n.API_URL+"/vehicle/image/"+n.car.images[0],o.Jc)}}function j(t,e){1&t&&(o.Xb(0,"div"),o.Xb(1,"p",21),o.Qc(2,"No images provided"),o.Wb(),o.Wb())}function X(t,e){1&t&&(o.Xb(0,"span",22),o.Qc(1,"\u2605"),o.Wb()),2&t&&o.Ib("filled",100===e.fill)}function W(t,e){if(1&t){var n=o.Yb();o.Xb(0,"div",23),o.Xb(1,"button",24),o.Xb(2,"mat-icon"),o.Qc(3,"settings"),o.Wb(),o.Wb(),o.Xb(4,"div",25),o.Xb(5,"a",26),o.jc("click",(function(){o.Hc(n);var t=o.nc();return t.openDialog("Update",t.car)})),o.Qc(6,"Add manual occupancy"),o.Wb(),o.Wb(),o.Wb()}}var C,O=((C=function(){function t(e,n){_classCallCheck(this,t),this.dialog=e,this.occupancyService=n,this.API_URL=a.a.API_URL}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"openDialog",value:function(t,e){var n=this;e.action=t,this.dialog.open(m,{width:"400px",data:e}).afterClosed().subscribe((function(t){var e;if("Update"===t.event){var a=new g.a(null,Number(t.data.from)/1e3,Number(t.data.to)/1e3,"MANUAL",null);n.occupancyService.add(null===(e=n.car)||void 0===e?void 0:e.id,a).subscribe((function(t){console.log(t)}),(function(t){alert(t)}))}else"Delete"===t.event&&console.log(t.data)}))}},{key:"checkMileage",value:function(t){return-1!=t?t:"Unlimited"}}]),t}()).\u0275fac=function(t){return new(t||C)(o.Rb(c.b),o.Rb(h.a))},C.\u0275cmp=o.Lb({type:C,selectors:[["app-car-teaser-car-info"]],inputs:{car:"car",admin:"admin"},decls:39,vars:17,consts:[[1,"row","m-3","shadow-sm","m-1","bg-white","rounded"],[1,"col-md-4","col-left","d-flex"],[4,"ngIf"],[1,"col-md-6","col-left","d-flex","justify-content-sm-start","justify-content-center","mt-3","align-items-center"],[1,"vehicle-info","mt-1"],["matTooltip","Vehicle brand and model",3,"matTooltipPosition"],["matTooltip","Fuel type",3,"matTooltipPosition"],["matTooltip","Transmission type",3,"matTooltipPosition"],["matTooltip","Vehicle category",3,"matTooltipPosition"],["matTooltip","Seats",3,"matTooltipPosition"],["matTooltip","Mileage",3,"matTooltipPosition"],[1,"col-sm-4","col-md-2","col-left"],[1,"row","mt-3","d-flex","justify-content-center","align-self-center"],["readonly","true","max","5",3,"rate","rateChange"],[1,"row","d-flex","justify-content-center","align-self-center"],[1,"col-sm-4","col-md-1","d-flex","justify-content-center","align-self-center"],["src","assets/images/comment.png","alt","",1,"comment-icon","mt-3"],[1,"col-sm-4","col-md-3","d-flex","justify-content-center","align-self-center"],["class","dropdown",4,"ngIf"],[1,"row","justify-content-center","align-self-center","ml-1"],[1,"car-Image","shadow-sm","bg-white","rounded",3,"src"],["unselectable","on","onselectstart","return false;","onmousedown","return false;",2,"text-align","center","line-height","150px","-moz-user-select","none","-webkit-user-select","none","-ms-user-select","none","user-select","none","-o-user-select","none"],[1,"star"],[1,"dropdown"],["id","dropdownMenuButton","data-toggle","dropdown","mat-button","","aria-haspopup","true","aria-expanded","false",1,"dropdown-toggle"],["aria-labelledby","dropdownMenuButton",1,"dropdown-menu"],[1,"dropdown-item",2,"cursor","pointer",3,"click"]],template:function(t,e){1&t&&(o.Xb(0,"div",0),o.Xb(1,"div",1),o.Oc(2,k,3,1,"div",2),o.Oc(3,j,3,0,"div",2),o.Wb(),o.Xb(4,"div",3),o.Xb(5,"ul",4),o.Xb(6,"li"),o.Xb(7,"mat-icon",5),o.Qc(8," directions_car"),o.Wb(),o.Qc(9),o.Wb(),o.Xb(10,"li"),o.Xb(11,"mat-icon",6),o.Qc(12," local_gas_station"),o.Wb(),o.Qc(13),o.Wb(),o.Xb(14,"li"),o.Xb(15,"mat-icon",7),o.Qc(16,"open_with"),o.Wb(),o.Qc(17),o.Wb(),o.Xb(18,"li"),o.Xb(19,"mat-icon",8),o.Qc(20,"commute"),o.Wb(),o.Qc(21),o.Wb(),o.Xb(22,"li"),o.Xb(23,"mat-icon",9),o.Qc(24,"airline_seat_recline_extra"),o.Wb(),o.Qc(25),o.Wb(),o.Xb(26,"li"),o.Xb(27,"mat-icon",10),o.Qc(28,"trending_up"),o.Wb(),o.Qc(29),o.Wb(),o.Wb(),o.Wb(),o.Xb(30,"div",11),o.Xb(31,"div",12),o.Xb(32,"ngb-rating",13),o.jc("rateChange",(function(t){return e.car.numberOfStars/(e.car.numberOfReviews=t)})),o.Oc(33,X,2,2,"ng-template"),o.Wb(),o.Wb(),o.Xb(34,"div",14),o.Xb(35,"div",15),o.Sb(36,"img",16),o.Wb(),o.Sb(37,"div",17),o.Wb(),o.Oc(38,W,7,0,"div",18),o.Wb(),o.Wb()),2&t&&(o.Db(2),o.uc("ngIf",e.car.images[0]),o.Db(1),o.uc("ngIf",!e.car.images[0]),o.Db(4),o.uc("matTooltipPosition","below"),o.Db(2),o.Tc(" ",e.car.brand.name," ",e.car.model.name," "),o.Db(2),o.uc("matTooltipPosition","below"),o.Db(2),o.Sc(" ",e.car.fuel.name," "),o.Db(2),o.uc("matTooltipPosition","below"),o.Db(2),o.Sc(" ",e.car.transmission.name," "),o.Db(2),o.uc("matTooltipPosition","below"),o.Db(2),o.Sc(" ",e.car.category.name," "),o.Db(2),o.uc("matTooltipPosition","below"),o.Db(2),o.Sc(" ",e.car.seats," "),o.Db(2),o.uc("matTooltipPosition","below"),o.Db(2),o.Sc(" ",e.checkMileage(e.car.mileage)," km "),o.Db(3),o.uc("rate",e.car.numberOfStars/e.car.numberOfReviews),o.Db(6),o.uc("ngIf",e.admin))},directives:[i.n,v.a,y.a,w.b,r.a],styles:[".star[_ngcontent-%COMP%]{font-size:1.5rem;margin-top:5em;color:#585858}.filled[_ngcontent-%COMP%]{color:#e81831}.car-Image[_ngcontent-%COMP%]{width:100%;height:100%;-o-object-fit:contain;object-fit:contain}.col-left[_ngcontent-%COMP%]{padding-left:0;align-items:center;justify-content:center}.col-vehicle-info[_ngcontent-%COMP%]{padding-left:.35em;padding-right:0}.vehicle-info[_ngcontent-%COMP%]{font-size:.8rem;list-style-type:none;-webkit-padding-start:0;padding-inline-start:0}.comment-icon[_ngcontent-%COMP%]{width:1.5em;height:1.5em}.info-label[_ngcontent-%COMP%]{font-family:RlBasisGrotesque,Avenir,Helvetica Neue,Helvetica,sans-serif;text-transform:none;margin-right:.4em;font-weight:700}.mat-icon[_ngcontent-%COMP%]{font-size:17px;width:17px;font-family:Material Icons!important;vertical-align:middle;margin-right:1rem;margin-left:.5rem;cursor:help}"]}),C)},bLfd:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var a=n("tk/3"),c=n("lJxs"),o=n("JIr8"),i=n("z6cu"),r=n("AytR"),l=n("fXoL"),s=n("b6Qw"),u=n("tyNb"),b=r.a.API_URL,d=function(){var t=function(){function t(e,n,a){_classCallCheck(this,t),this.cookieService=e,this.http=n,this.router=a}return _createClass(t,[{key:"checkout",value:function(t){var e=new a.d({"Content-Type":"application/json"});return this.http.post(b+"/checkout",t,{headers:e,observe:"response",responseType:"text"}).pipe(Object(c.a)((function(t){return t.body})),Object(o.a)((function(t){return Object(i.a)(t.error.message)})))}},{key:"getCustomerRentals",value:function(t,e,n){var r=new a.d({"Content-Type":"application/json",pageable:"true",page:n.toString()});return this.http.get("".concat(b,"/customer/").concat(t,"/rental/status/").concat(e),{headers:r,observe:"response"}).pipe(Object(c.a)((function(t){return t.body})),Object(o.a)((function(t){return Object(i.a)(t.error.message)})))}},{key:"getOwnerRentals",value:function(t,e,n){var r=new a.d({"Content-Type":"application/json",pageable:"true",page:n.toString()});return this.http.get("".concat(b,"/owner/").concat(t,"/rental/status/").concat(e),{headers:r,observe:"response"}).pipe(Object(c.a)((function(t){return t.body})),Object(o.a)((function(t){return Object(i.a)(t.error.message)})))}},{key:"edit",value:function(t,e){var n=new a.d({"Content-Type":"application/json"});return this.http.put("".concat(b,"/rental/").concat(t),e,{headers:n,observe:"response"}).pipe(Object(c.a)((function(t){return t.body})),Object(o.a)((function(t){return Object(i.a)(t.error)})))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l.fc(s.a),l.fc(a.b),l.fc(u.c))},t.\u0275prov=l.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},j6lU:function(t,e,n){"use strict";n.d(e,"a",(function(){return d}));var a=n("AytR"),c=n("tk/3"),o=n("lJxs"),i=n("JIr8"),r=n("z6cu"),l=n("fXoL"),s=n("b6Qw"),u=n("tyNb"),b=a.a.API_URL,d=function(){var t=function(){function t(e,n,a){_classCallCheck(this,t),this.cookieService=e,this.http=n,this.router=a}return _createClass(t,[{key:"getByVehicle",value:function(t){var e=new c.d({"Content-Type":"application/json"});return this.http.get("".concat(b,"/vehicle/").concat(t,"/occupancy"),{headers:e,observe:"response"}).pipe(Object(o.a)((function(t){return t.body})),Object(i.a)((function(t){return Object(r.a)(t.error.message)})))}},{key:"getOne",value:function(t,e,n){var a=new c.d({"Content-Type":"application/json"});return this.http.get("".concat(b,"/vehicle/").concat(t,"/occupancy/start/").concat(e,"/end/").concat(n),{headers:a,observe:"response"}).pipe(Object(o.a)((function(t){return t.body})),Object(i.a)((function(t){return Object(r.a)(t.error.message)})))}},{key:"add",value:function(t,e){var n=new c.d({"Content-Type":"application/json"});return this.http.post("".concat(b,"/vehicle/").concat(t,"/occupancy"),e,{headers:n,observe:"response"}).pipe(Object(o.a)((function(t){return t.body})),Object(i.a)((function(t){return Object(r.a)(t.error.message)})))}},{key:"edit",value:function(t,e,n){var a=new c.d({"Content-Type":"application/json"});return this.http.put("".concat(b,"/vehicle/").concat(t,"/occupancy/").concat(e),n,{headers:a,observe:"response"}).pipe(Object(o.a)((function(t){return t.body})),Object(i.a)((function(t){return Object(r.a)(t.error.message)})))}},{key:"delete",value:function(t,e){var n=new c.d({"Content-Type":"application/json"});return this.http.delete("".concat(b,"/vehicle/").concat(t,"/occupancy/").concat(e),{headers:n,observe:"response"}).pipe(Object(o.a)((function(t){return t.body})),Object(i.a)((function(t){return Object(r.a)(t.error.message)})))}}]),t}();return t.\u0275fac=function(e){return new(e||t)(l.fc(s.a),l.fc(c.b),l.fc(u.c))},t.\u0275prov=l.Nb({token:t,factory:t.\u0275fac,providedIn:"root"}),t}()},wF8t:function(t,e,n){"use strict";n.d(e,"a",(function(){return U}));var a=n("fXoL"),c=n("zoVj"),o=function t(){_classCallCheck(this,t)},i=n("0IaG"),r=n("kmnG"),l=n("qFsG"),s=n("3Pt+"),u=n("1kSV"),b=n("bTqV");function d(t,e){1&t&&(a.Xb(0,"span",13),a.Qc(1,"\u2605"),a.Wb()),2&t&&a.Ib("filled",100===e.fill)}var f,p=((f=function(){function t(e,n){_classCallCheck(this,t),this.dialogRef=e,this.data=n,this.local_data=Object.assign({},n)}return _createClass(t,[{key:"doAction",value:function(){this.dialogRef.close({data:this.local_data})}},{key:"closeDialog",value:function(){this.dialogRef.close({event:"Cancel"})}}]),t}()).\u0275fac=function(t){return new(t||f)(a.Rb(i.f),a.Rb(i.a,8))},f.\u0275cmp=a.Lb({type:f,selectors:[["app-new-review-dialogbox"]],decls:23,vars:2,consts:[[1,"text-center"],["mat-dialog-title",""],["mat-dialog-content","",1,"row-sm-12"],[1,"row-sm-12"],[2,"width","80%"],["rows","4","placeholder","Review text","matInput","",3,"ngModel","ngModelChange"],[1,"row","mt-3","d-flex","justify-content-center","align-self-center"],[1,"row","mt-3","mb-3","d-flex","justify-content-center","align-self-center"],["max","5",3,"rate","rateChange"],[1,"text-right"],["mat-dialog-actions","",1,"col-sm-12","d-flex","justify-content-center","mt-2"],["mat-button","",1,"do-button",3,"click"],["mat-button","","mat-flat-button","",3,"click"],[1,"star"]],template:function(t,e){1&t&&(a.Xb(0,"div",0),a.Xb(1,"h1",1),a.Xb(2,"strong"),a.Qc(3,"New review"),a.Wb(),a.Wb(),a.Xb(4,"div",2),a.Xb(5,"div"),a.Xb(6,"div",3),a.Xb(7,"mat-form-field",4),a.Xb(8,"textarea",5),a.jc("ngModelChange",(function(t){return e.local_data.text=t})),a.Qc(9," "),a.Wb(),a.Wb(),a.Wb(),a.Xb(10,"div",3),a.Xb(11,"div",6),a.Xb(12,"p"),a.Qc(13,"Rating"),a.Wb(),a.Wb(),a.Xb(14,"div",7),a.Xb(15,"ngb-rating",8),a.jc("rateChange",(function(t){return e.local_data.stars=t})),a.Oc(16,d,2,2,"ng-template"),a.Wb(),a.Wb(),a.Wb(),a.Wb(),a.Wb(),a.Xb(17,"div",9),a.Xb(18,"div",10),a.Xb(19,"button",11),a.jc("click",(function(){return e.doAction()})),a.Qc(20,"Post a review"),a.Wb(),a.Xb(21,"button",12),a.jc("click",(function(){return e.closeDialog()})),a.Qc(22,"Cancel"),a.Wb(),a.Wb(),a.Wb(),a.Wb()),2&t&&(a.Db(8),a.uc("ngModel",e.local_data.text),a.Db(7),a.uc("rate",e.local_data.stars))},directives:[i.g,i.d,r.c,l.b,s.b,s.j,s.m,u.b,i.c,b.a],styles:[".do-button[_ngcontent-%COMP%]{background-color:#e81831;color:#fff}.star[_ngcontent-%COMP%]{font-size:3rem;margin-top:5em;color:#585858}.filled[_ngcontent-%COMP%]{color:#e81831}ng-template[_ngcontent-%COMP%], ngb-rating[_ngcontent-%COMP%], span[_ngcontent-%COMP%]{outline:none}"]}),f),m=function t(){_classCallCheck(this,t)},g=n("ofXK");function h(t,e){if(1&t&&(a.Xb(0,"div",7),a.Xb(1,"div",8),a.Xb(2,"p",9),a.Qc(3,"Penalty: "),a.Wb(),a.Wb(),a.Xb(4,"div",10),a.Xb(5,"p",11),a.Qc(6),a.Wb(),a.Wb(),a.Wb()),2&t){var n=a.nc();a.Db(6),a.Rc(n.getPenalty())}}var v,y,w=((v=function(){function t(e,n){_classCallCheck(this,t),this.dialogRef=e,this.data=n,this.penalty=!1,this.mileage=0,this.local_data=Object.assign({},n),this.report=this.local_data.report,this.rental=this.local_data.rental}return _createClass(t,[{key:"calculatePenalty",value:function(t){this.mileage=t.target.value,this.mileage>this.rental.car.availableMileage&&-1!=this.rental.car.availableMileage&&0!=this.rental.car.pricelist.penalty?(this.penalty=!0,this.penaltyValue=(this.mileage-this.rental.car.availableMileage)*this.rental.car.pricelist.penalty):(this.penalty=!1,this.penaltyValue=null)}},{key:"getPenalty",value:function(){return this.penaltyValue}},{key:"finalPrice",value:function(){var t=Math.ceil((this.rental.to-this.rental.from)/86400),e=t*this.rental.car.pricelist.pricePerDay;return t>10&&(e-=e*this.rental.car.pricelist.discount),e}},{key:"doAction",value:function(){this.dialogRef.close({data:this.local_data})}},{key:"closeDialog",value:function(){this.dialogRef.close({event:"Cancel"})}}]),t}()).\u0275fac=function(t){return new(t||v)(a.Rb(i.f),a.Rb(i.a,8))},v.\u0275cmp=a.Lb({type:v,selectors:[["app-new-rental-report-dialogbox"]],decls:27,vars:4,consts:[[1,"text-center"],["mat-dialog-title",""],["mat-dialog-content","",1,"row-sm-12"],[1,"row-sm-12"],[2,"width","80%"],["rows","4","placeholder","Description","matInput","",3,"ngModel","ngModelChange"],["type","number","name","mileage","placeholder","Mileage","matInput","",3,"ngModel","change","ngModelChange"],[1,"row"],[1,"col-sm-6","d-flex","justify-content-center"],[1,"label"],[1,"col-sm-4","d-flex","justify-content-center"],[1,"number"],["class","row",4,"ngIf"],[1,"text-right"],["mat-dialog-actions","",1,"col-sm-12","d-flex","justify-content-center","mt-2"],["mat-button","",1,"do-button",3,"click"],["mat-button","","mat-flat-button","",3,"click"]],template:function(t,e){1&t&&(a.Xb(0,"div",0),a.Xb(1,"h1",1),a.Xb(2,"strong"),a.Qc(3,"New rental report"),a.Wb(),a.Wb(),a.Xb(4,"div",2),a.Xb(5,"div"),a.Xb(6,"div",3),a.Xb(7,"mat-form-field",4),a.Xb(8,"textarea",5),a.jc("ngModelChange",(function(t){return e.local_data.description=t})),a.Qc(9," "),a.Wb(),a.Wb(),a.Wb(),a.Xb(10,"div",3),a.Xb(11,"mat-form-field",4),a.Xb(12,"input",6),a.jc("change",(function(t){return e.calculatePenalty(t)}))("ngModelChange",(function(t){return e.local_data.mileage=t})),a.Wb(),a.Wb(),a.Wb(),a.Xb(13,"div",7),a.Xb(14,"div",8),a.Xb(15,"p",9),a.Qc(16,"Final price: "),a.Wb(),a.Wb(),a.Xb(17,"div",10),a.Xb(18,"p",11),a.Qc(19),a.Wb(),a.Wb(),a.Wb(),a.Oc(20,h,7,1,"div",12),a.Wb(),a.Wb(),a.Xb(21,"div",13),a.Xb(22,"div",14),a.Xb(23,"button",15),a.jc("click",(function(){return e.doAction()})),a.Qc(24,"Submit a report"),a.Wb(),a.Xb(25,"button",16),a.jc("click",(function(){return e.closeDialog()})),a.Qc(26,"Cancel"),a.Wb(),a.Wb(),a.Wb(),a.Wb()),2&t&&(a.Db(8),a.uc("ngModel",e.local_data.description),a.Db(4),a.uc("ngModel",e.local_data.mileage),a.Db(7),a.Rc(e.finalPrice()),a.Db(1),a.uc("ngIf",e.penalty))},directives:[i.g,i.d,r.c,l.b,s.b,s.j,s.m,s.o,g.n,i.c,b.a],styles:[".do-button[_ngcontent-%COMP%]{background-color:#e81831;color:#fff}"]}),v),k=function t(){_classCallCheck(this,t)},j=n("qfBg"),X=n("AytR"),W=n("tk/3"),C=n("lJxs"),O=n("JIr8"),_=n("z6cu"),D=X.a.API_URL,I=((y=function(){function t(e){_classCallCheck(this,t),this.http=e}return _createClass(t,[{key:"add",value:function(t){var e=new W.d({"Content-Type":"application/json"});return this.http.post("".concat(D,"/rental/").concat(t.rentalId,"/rental_report"),t,{headers:e,observe:"response"}).pipe(Object(C.a)((function(t){return t.body})),Object(O.a)((function(t){return Object(_.a)(t.error.message)})))}}]),t}()).\u0275fac=function(t){return new(t||y)(a.fc(W.b))},y.\u0275prov=a.Nb({token:y,factory:y.\u0275fac,providedIn:"root"}),y),P=n("4kQV"),R=n("bLfd"),x=n("QHs6");function Q(t,e){if(1&t){var n=a.Yb();a.Xb(0,"a",14),a.jc("click",(function(t){return a.Hc(n),a.nc(2).newReview(t)})),a.Qc(1,"Post a review"),a.Wb()}}function M(t,e){if(1&t){var n=a.Yb();a.Xb(0,"a",14),a.jc("click",(function(t){return a.Hc(n),a.nc(2).sendMessage(t)})),a.Qc(1,"Send a message to customer"),a.Wb()}}function S(t,e){if(1&t&&(a.Xb(0,"div",12),a.Oc(1,Q,2,0,"a",13),a.Oc(2,M,2,0,"a",13),a.Wb()),2&t){var n=a.nc();a.Db(1),a.uc("ngIf","FINISHED"===n.status),a.Db(1),a.uc("ngIf","PENDING"===n.status)}}function T(t,e){if(1&t){var n=a.Yb();a.Xb(0,"a",14),a.jc("click",(function(t){return a.Hc(n),a.nc(2).approveRental(t)})),a.Qc(1,"Approve"),a.Wb()}}function L(t,e){if(1&t){var n=a.Yb();a.Xb(0,"a",17),a.jc("click",(function(t){return a.Hc(n),a.nc(2).rejectRental(t)})),a.Qc(1,"Reject"),a.Wb()}}function N(t,e){if(1&t){var n=a.Yb();a.Xb(0,"a",14),a.jc("click",(function(t){return a.Hc(n),a.nc(2).sendMessage(t)})),a.Qc(1,"Send a message to owner"),a.Wb()}}function A(t,e){if(1&t){var n=a.Yb();a.Xb(0,"a",18),a.jc("click",(function(t){return a.Hc(n),a.nc(2).finishRental(t)})),a.Qc(1,"\xa0Confirm rental finishing \xa0"),a.Wb()}}function E(t,e){if(1&t){var n=a.Yb();a.Xb(0,"a",14),a.jc("click",(function(t){return a.Hc(n),a.nc(2).newReport(t)})),a.Qc(1,"Rental report"),a.Wb()}}function H(t,e){if(1&t&&(a.Xb(0,"div",12),a.Oc(1,T,2,0,"a",13),a.Oc(2,L,2,0,"a",15),a.Oc(3,N,2,0,"a",13),a.Oc(4,A,2,0,"a",16),a.Oc(5,E,2,0,"a",13),a.Wb()),2&t){var n=a.nc();a.Db(1),a.uc("ngIf","PENDING"===n.status),a.Db(1),a.uc("ngIf","PENDING"===n.status),a.Db(1),a.uc("ngIf","PENDING"===n.status),a.Db(1),a.uc("ngIf","RESERVED"===n.status),a.Db(1),a.uc("ngIf","FINISHED"===n.status&&null===n.rental.report)}}var V,U=((V=function(){function t(e,n,c,o,i){_classCallCheck(this,t),this.userService=e,this.rentalReportService=n,this.reviewService=c,this.rentalService=o,this.dialog=i,this.delete=new a.o}return _createClass(t,[{key:"ngOnInit",value:function(){}},{key:"fromLocaleString",value:function(){return new Date(1e3*this.rental.from).toLocaleString()}},{key:"toLocaleString",value:function(){return new Date(1e3*this.rental.to).toLocaleString()}},{key:"sendMessage",value:function(t){t.stopPropagation()}},{key:"newReview",value:function(t){var e=this;t.stopPropagation(),this.dialog.open(p,{width:"500px",data:new o}).afterClosed().subscribe((function(t){if("Cancel"!==t.event){var n=new o;n.text=t.data.text,n.stars=t.data.stars;var a=new m;a.id=e.rental.car.id,n.vehicle=a,n.customerId=e.userService.getUser().id,n.customerName=e.userService.getUser().name,n.date=Date.now()/1e3,console.log(n),e.reviewService.add(n.vehicle.id,n).subscribe((function(t){}),(function(t){alert(t)}))}}))}},{key:"approveRental",value:function(t){var e=this;t.stopPropagation();var n=new c.a(this.rental.id,this.rental.car.id,this.rental.customerId,this.rental.ownerId,this.rental.from,this.rental.to,null,null,"RESERVED",this.rental.company);this.rentalService.edit(this.rental.id,n).subscribe((function(t){e.delete.emit(e.rental)}),(function(t){alert(t.message),"CONFLICT"===t.status&&e.delete.emit(e.rental)}))}},{key:"rejectRental",value:function(t){var e=this;t.stopPropagation();var n=new c.a(this.rental.id,this.rental.car.id,this.rental.customerId,this.rental.ownerId,this.rental.from,this.rental.to,null,null,"CANCELED",this.rental.company);this.rentalService.edit(this.rental.id,n).subscribe((function(t){e.delete.emit(e.rental)}),(function(t){alert(t.message)}))}},{key:"finishRental",value:function(t){var e=this;t.stopPropagation();var n=new c.a(this.rental.id,this.rental.car.id,this.rental.customerId,this.rental.ownerId,this.rental.from,this.rental.to,null,null,"FINISHED",this.rental.company);this.rentalService.edit(this.rental.id,n).subscribe((function(t){e.delete.emit(e.rental)}),(function(t){alert(t.message)}))}},{key:"newReport",value:function(t){var e=this;t.stopPropagation(),this.dialog.open(w,{width:"500px",data:{report:new k,rental:this.rental}}).afterClosed().subscribe((function(t){if("Cancel"!==t.event){var n=new k;n.description=t.data.description,n.mileage=t.data.mileage,n.rentalId=e.rental.id,e.rentalReportService.add(n).subscribe((function(t){e.rental.report=new k}),(function(t){alert(t)}))}}))}}]),t}()).\u0275fac=function(t){return new(t||V)(a.Rb(j.a),a.Rb(I),a.Rb(P.a),a.Rb(R.a),a.Rb(i.b))},V.\u0275cmp=a.Lb({type:V,selectors:[["app-rental-teaser"]],inputs:{rental:"rental",status:"status",customer:"customer"},outputs:{delete:"delete"},decls:24,vars:5,consts:[[1,"row",2,"width","100%"],[2,"width","100%",3,"car"],[1,"row","mb-1","ml-2","shadow-sm","bg-white","rounded",2,"width","94%"],[1,"col-sm-7","mt-3"],[1,"row","ml-1"],[1,"col-sm-2","d-flex","justify-content-sm-end","justify-content-center"],[1,"label"],[1,"col-sm-8","d-flex","justify-content-sm-start","justify-content-center"],[1,"text"],[1,"w-100"],[1,"col-sm-5","d-flex","justify-content-sm-end","justify-content-center"],["class","row mt-3 ml-3 mb-3","style","margin-bottom: 0; margin-right: 0;",4,"ngIf"],[1,"row","mt-3","ml-3","mb-3",2,"margin-bottom","0","margin-right","0"],["class","btn btn-sm btn-outline-danger",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-outline-danger",3,"click"],["class","btn btn-sm btn-outline-danger","style","margin-left: 3px;",3,"click",4,"ngIf"],["class","btn btn-sm btn-outline-danger","style","margin-top: 3px;",3,"click",4,"ngIf"],[1,"btn","btn-sm","btn-outline-danger",2,"margin-left","3px",3,"click"],[1,"btn","btn-sm","btn-outline-danger",2,"margin-top","3px",3,"click"]],template:function(t,e){1&t&&(a.Xb(0,"div",0),a.Xb(1,"app-car-teaser-car-info",1),a.Qc(2," [admin]='false'"),a.Wb(),a.Wb(),a.Xb(3,"div",2),a.Xb(4,"div",3),a.Xb(5,"div",4),a.Xb(6,"div",5),a.Xb(7,"p",6),a.Qc(8,"From"),a.Wb(),a.Wb(),a.Xb(9,"div",7),a.Xb(10,"p",8),a.Qc(11),a.Wb(),a.Wb(),a.Sb(12,"div",9),a.Wb(),a.Xb(13,"div",4),a.Xb(14,"div",5),a.Xb(15,"p",6),a.Qc(16,"To"),a.Wb(),a.Wb(),a.Xb(17,"div",7),a.Xb(18,"p",8),a.Qc(19),a.Wb(),a.Wb(),a.Sb(20,"div",9),a.Wb(),a.Wb(),a.Xb(21,"div",10),a.Oc(22,S,3,2,"div",11),a.Oc(23,H,6,5,"div",11),a.Wb(),a.Wb()),2&t&&(a.Db(1),a.uc("car",e.rental.car),a.Db(10),a.Rc(e.fromLocaleString()),a.Db(8),a.Rc(e.toLocaleString()),a.Db(3),a.uc("ngIf",e.customer),a.Db(1),a.uc("ngIf",!e.customer))},directives:[x.a,g.n],styles:[".label[_ngcontent-%COMP%]{font-weight:500}.text[_ngcontent-%COMP%]{font-weight:400}.mat-checkbox-indeterminate.mat-accent[_ngcontent-%COMP%]   .mat-checkbox-background[_ngcontent-%COMP%],   .mat-checkbox-checked.mat-accent .mat-checkbox-background{background-color:#e81831}.mat-icon[_ngcontent-%COMP%]{font-size:17px;width:17px;font-family:Material Icons!important;vertical-align:middle;margin-right:1rem;margin-left:.5rem;cursor:help}.dropdown-toggle[_ngcontent-%COMP%]:after{display:none}.active[_ngcontent-%COMP%]{background-color:#e81831;color:#eee}.btn-outline-danger[_ngcontent-%COMP%]{display:inline-flex;align-items:center}.btn-outline-danger[_ngcontent-%COMP%]:hover{background-color:#e81831}a[_ngcontent-%COMP%]:hover{color:#fff}"]}),V)},zoVj:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"a",(function(){return c}));var a=function t(e,n,a,c,o,i,r,l,s){_classCallCheck(this,t),this.id=e,this.car=n,this.from=a,this.to=c,this.bundle=o,this.report=i,this.customerId=r,this.ownerId=l,this.company=s},c=function t(e,n,a,c,o,i,r,l,s,u){_classCallCheck(this,t),this.bundle=null,this.id=e,this.vehicleId=n,this.customerId=a,this.ownerId=c,this.startTime=o,this.endTime=i,this.bundle=r,this.report=l,this.status=s,this.cid=u}}}]);